<style>
    .div_Ur32DJUU6NXFiO3 {
        --color-letter: #ffffff;
        color: var(--color);
        pointer-events: none;
        position: fixed;
        inset: 0;

        margin: 0;
        padding: 0;

        display: flex;
        font-family: sans-serif;

        & * {
            margin: 0;
            padding: 0;
            font-family: sans-serif;
        }

        & svg {
            width: 15px;
            height: 15px;
            fill: #ffffff;
        }

        & button {
            background: none;
            outline: none;
            border: none;
        }
    }

    .div_vOjQgb9XSrcW3 {
        pointer-events: initial;
        background: #ffffff;
        position: absolute;
        bottom: 10px;
        left: 10px;
        padding: 10px;
        gap: 5px;

        border-radius: 15px;

        display: grid;

        & button {
            background: #ffffff;

            width: 40px;
            height: 40px;

            border-radius: 15px;

            display: flex;
            justify-content: center;
            align-items: center;

            cursor: move;
        }

        & svg {
            fill: #000000;
        }
    }

    .div_lZkA8fmCq8F5KZZ {
        display: grid;
        gap: inherit;
        background: #000000;
        border-radius: 15px;

        & button {
            background: #000000;
            cursor: pointer;
        }

        & svg {
            fill: #ffffff;
        }
    }

    .div_7mihnzNaZnFC5HG {
        backdrop-filter: blur(5px);

        pointer-events: initial;
        position: fixed;
        inset: 0;

        display: flex;
        padding: 10px;
    }

    .div_1sRBPp9RSs22UhT {
        background: #ffffff;

        position: relative;
        margin: auto;

        width: min(100%, 1000px);
        height: min(100%, 600px);

        display: grid;
        grid-template-columns: auto 1fr;
        overflow: hidden;

        padding: 10px;
        gap: 10px;

        border-radius: 15px;
    }

    .div_sqeCyW5YlYsoB {
        gap: 10px;

        display: flex;
        flex-direction: column;
        overflow: hidden;

        & button {
            background: #000000;
            width: 40px;
            height: 40px;

            display: flex;
            justify-content: center;
            align-items: center;

            border-radius: 15px;

            cursor: pointer;
        }
    }

    .div_Q7Fo8NXg3F1Q2K {
        width: 100%;
        height: 100%;
        overflow: hidden;

        background: #000000;

        display: flex;
        justify-content: center;
        align-items: center;

        border-radius: 15px;
        position: relative;

        & video {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        & canvas {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
    }

    .div_03MynLZC8kztGGq {
        flex: 1;
        overflow: auto;
        scrollbar-width: thin;
        scrollbar-color: #000000 transparent;
    }

    .div_GhMIbLOSkhxFYKR {
        display: grid;

        & span {
            --background: #ffffff;
            --color: #000000;

            background: var(--background);

            width: 40px;
            height: 40px;

            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;

            cursor: pointer;

            border-radius: 50%;

            &.focus {
                --background: #000000;
                --color: #ffffff;
            }

            &::before {
                content: "";
                width: 5px;
                height: 5px;
                border-radius: 50%;

                background: var(--color);
            }
        }
    }

    .div_LAppN2JUWu0jkdj {
        position: absolute;
        inset: 0;

        display: flex;
        flex-direction: column;

        justify-content: space-between;
    }

    .div_30iEfg1Tp8Z9Sfe {
        width: 100%;
        height: 60px;

        display: flex;
        overflow: hidden;
        position: relative;
        background: rgb(0 0 0 / 0.3);
    }

    .div_fqntqCwolU7nS2I {
        flex: 1;
        display: flex;
        justify-content: space-evenly;
        align-items: center;
        overflow: hidden;

        /*gap: 15px;*/

        & button {
            background: rgb(0 0 0 / 0.3);
            width: 60px;
            height: 60px;

            display: flex;
            justify-content: center;
            align-items: center;

            border-radius: 50%;
            position: relative;

            &.medium {
                width: 80px;
                height: 80px;

                & svg {
                    width: 25px;
                    height: 25px;
                }
            }
        }

        & svg {
            fill: #ffffff;
            width: 20px;
            height: 20px;
        }
    }

    .div_KYTTm4XcCkVvAmy {
        display: flex;
        padding: 10px;
        gap: 10px;
        flex: 1;

        overflow: hidden;
    }

    .div_swkEBnnVsXvSjjL {
        flex: 1;
        margin: auto;
        overflow: hidden;
        display: grid;

        color: #ffffff;

        & p {
            font-size: 15px;
            font-weight: bold;
        }

        & span {
            font-size: 13px;
        }
    }

    .div_quGYBx1MHxIWCd6 {
        position: relative;
        flex: 1;
        display: grid;
        margin: auto;
        gap: 3px;

        & span {
            font-size: 14px;
            color: #ffffff;
        }
    }

    .button_wBp8eB3YdFZoLqE {
        margin: 10px;
        width: 40px;
        height: 40px;

        position: relative;

        display: flex;
        justify-content: center;
        align-items: center;

        cursor: pointer;
    }


    .div_iVl4urAy8xQ7zk6 {
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;

        background: rgb(255 255 255 / 0.3);
        height: 3px;
        border-radius: 3px;
        flex: 1;

        & input {
            position: relative;
            width: 100%;
            opacity: 0;
        }

        & hr {
            position: absolute;
            left: 0;
            background: #ffffff;
            width: 0;
            height: 100%;
            border: none;
            border-radius: inherit;
        }
    }

    .div_FjdPGlm8AY56dul {
        position: relative;
        display: flex;
        justify-content: space-between;
        align-items: center;

        background: rgb(0 0 0 / 0.3);
        height: 60px;


        color: #ffffff;

    }

    .div_RyRmgPCbEnfoDT {
        display: flex;
        align-items: center;
    }
</style>

<script>

    const icons = {
        play: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="512" height="512"><path d="M20.494,7.968l-9.54-7A5,5,0,0,0,3,5V19a5,5,0,0,0,7.957,4.031l9.54-7a5,5,0,0,0,0-8.064Zm-1.184,6.45-9.54,7A3,3,0,0,1,5,19V5A2.948,2.948,0,0,1,6.641,2.328,3.018,3.018,0,0,1,8.006,2a2.97,2.97,0,0,1,1.764.589l9.54,7a3,3,0,0,1,0,4.836Z"></path></svg>',
        pause:
            '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="512" height="512"><path d="M6.5,0A3.5,3.5,0,0,0,3,3.5v17a3.5,3.5,0,0,0,7,0V3.5A3.5,3.5,0,0,0,6.5,0ZM8,20.5a1.5,1.5,0,0,1-3,0V3.5a1.5,1.5,0,0,1,3,0Z"></path><path d="M17.5,0A3.5,3.5,0,0,0,14,3.5v17a3.5,3.5,0,0,0,7,0V3.5A3.5,3.5,0,0,0,17.5,0ZM19,20.5a1.5,1.5,0,0,1-3,0V3.5a1.5,1.5,0,0,1,3,0Z"></path></svg>',
        download:
            '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="512" height="512"><path d="M9.878,18.122a3,3,0,0,0,4.244,0l3.211-3.211A1,1,0,0,0,15.919,13.5l-2.926,2.927L13,1a1,1,0,0,0-1-1h0a1,1,0,0,0-1,1l-.009,15.408L8.081,13.5a1,1,0,0,0-1.414,1.415Z"></path><path d="M23,16h0a1,1,0,0,0-1,1v4a1,1,0,0,1-1,1H3a1,1,0,0,1-1-1V17a1,1,0,0,0-1-1H1a1,1,0,0,0-1,1v4a3,3,0,0,0,3,3H21a3,3,0,0,0,3-3V17A1,1,0,0,0,23,16Z"></path></svg>',
        lock: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="512" height="512"><path d="M19,8.424V7A7,7,0,0,0,5,7V8.424A5,5,0,0,0,2,13v6a5.006,5.006,0,0,0,5,5H17a5.006,5.006,0,0,0,5-5V13A5,5,0,0,0,19,8.424ZM7,7A5,5,0,0,1,17,7V8H7ZM20,19a3,3,0,0,1-3,3H7a3,3,0,0,1-3-3V13a3,3,0,0,1,3-3H17a3,3,0,0,1,3,3Z"></path><path d="M12,14a1,1,0,0,0-1,1v2a1,1,0,0,0,2,0V15A1,1,0,0,0,12,14Z"></path></svg>',
        chromecast:
            '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m24,7v10c0,2.757-2.243,5-5,5h-3c-.552,0-1-.448-1-1s.448-1,1-1h3c1.654,0,3-1.346,3-3V7c0-1.654-1.346-3-3-3H5c-1.363,0-2.557.919-2.902,2.236-.14.534-.684.855-1.221.713-.534-.14-.854-.687-.713-1.221.576-2.195,2.564-3.728,4.836-3.728h14c2.757,0,5,2.243,5,5ZM1.5,19c-.828,0-1.5.672-1.5,1.5s.672,1.5,1.5,1.5,1.5-.672,1.5-1.5-.672-1.5-1.5-1.5Zm-.5-5c-.552,0-1,.448-1,1s.448,1,1,1c2.757,0,5,2.243,5,5,0,.552.448,1,1,1s1-.448,1-1c0-3.86-3.14-7-7-7Zm.047-5c-.552,0-1,.448-1,1s.448,1,1,1c5.488,0,9.953,4.486,9.953,10,0,.552.448,1,1,1s1-.448,1-1c0-6.617-5.362-12-11.953-12Z"></path></svg>',
        playbackSpeed:
            '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="512" height="512"><path  d="M24,13a11.914,11.914,0,0,1-3.508,8.47,3.037,3.037,0,0,1-4.12.174l-1.026-.887a1,1,0,0,1,1.308-1.514l1.027.888a1.014,1.014,0,0,0,1.395-.075,10.044,10.044,0,0,0-.414-14.513,9.9,9.9,0,0,0-7.823-2.478A9.992,9.992,0,0,0,4.962,20.094a1,1,0,0,0,1.357.038l1.027-.889a1,1,0,0,1,1.308,1.514l-1.026.888a3.016,3.016,0,0,1-4.073-.129A12,12,0,1,1,24,13ZM17.707,8.707a1,1,0,0,0-1.414-1.414l-3.775,3.775a2,2,0,1,0,1.414,1.414Z"></path></svg>',
        pip: '<svg height="512" viewBox="0 0 24 24" width="512" xmlns="http://www.w3.org/2000/svg"><path d="m19 0h-8a5.006 5.006 0 0 0 -5 5v6h-1a5.006 5.006 0 0 0 -5 5v3a5.006 5.006 0 0 0 5 5h3a5.006 5.006 0 0 0 5-5v-1h6a5.006 5.006 0 0 0 5-5v-8a5.006 5.006 0 0 0 -5-5zm-8 16a3 3 0 0 1 -3-3 3 3 0 0 1 3 3zm0 3a3 3 0 0 1 -3 3h-3a3 3 0 0 1 -3-3v-3a3 3 0 0 1 3-3h1a5.006 5.006 0 0 0 5 5zm11-6a3 3 0 0 1 -3 3h-6a4.969 4.969 0 0 0 -.833-2.753l5.833-5.833v2.586a1 1 0 0 0 2 0v-3a3 3 0 0 0 -3-3h-3a1 1 0 0 0 0 2h2.586l-5.833 5.833a4.969 4.969 0 0 0 -2.753-.833v-6a3 3 0 0 1 3-3h8a3 3 0 0 1 3 3z"></path></svg>',
        background:
            '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="512" height="512"><path d="M19,0H5C2.24,0,0,2.24,0,5v14c0,2.76,2.24,5,5,5h14c2.76,0,5-2.24,5-5V5c0-2.76-2.24-5-5-5Zm3,14.59l-7.41,7.41h-4.17l11.59-11.59v4.17Zm-1.71-12.29L2.29,20.29c-.19-.39-.29-.83-.29-1.29v-2.59L16.41,2h2.59c.46,0,.9,.11,1.29,.29ZM2,9.41L9.41,2h4.17L2,13.59v-4.17ZM5,2h1.59L2,6.59v-1.59c0-1.65,1.35-3,3-3Zm-1.29,19.71L21.71,3.71c.19,.39,.29,.83,.29,1.29v2.59L7.59,22h-2.59c-.46,0-.9-.11-1.29-.29Zm15.29,.29h-1.59l4.59-4.59v1.59c0,1.65-1.35,3-3,3Z" /></svg>',
        resize:
            '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="512" height="512"><path d="M23,18H20V9a5.006,5.006,0,0,0-5-5H6V1A1,1,0,0,0,4,1V4H1A1,1,0,0,0,1,6H4v9a5.006,5.006,0,0,0,5,5h9v3a1,1,0,0,0,2,0V20h3a1,1,0,0,0,0-2ZM9,18a3,3,0,0,1-3-3V6h9a3,3,0,0,1,3,3v9Z"/></svg>',
        options:
            '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="512" height="512"><circle cx="12" cy="2" r="2"></circle><circle cx="12" cy="12" r="2"></circle><circle cx="12" cy="22" r="2"></circle></svg>',
        seekLeft:
            '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="512" height="512"><path d="M12,0A11.972,11.972,0,0,0,4,3.073V1A1,1,0,0,0,2,1V4A3,3,0,0,0,5,7H8A1,1,0,0,0,8,5H5a.854.854,0,0,1-.1-.021A9.987,9.987,0,1,1,2,12a1,1,0,0,0-2,0A12,12,0,1,0,12,0Z"></path><path d="M12,6a1,1,0,0,0-1,1v5a1,1,0,0,0,.293.707l3,3a1,1,0,0,0,1.414-1.414L13,11.586V7A1,1,0,0,0,12,6Z"></path></svg>',
        seekRight:
            '<svg height="512" viewBox="0 0 24 24" width="512" xmlns="http://www.w3.org/2000/svg"><path d="m23 11a1 1 0 0 0 -1 1 10.034 10.034 0 1 1 -2.9-7.021.862.862 0 0 1 -.1.021h-3a1 1 0 0 0 0 2h3a3 3 0 0 0 3-3v-3a1 1 0 0 0 -2 0v2.065a11.994 11.994 0 1 0 4 8.935 1 1 0 0 0 -1-1z"></path><path d="m12 6a1 1 0 0 0 -1 1v5a1 1 0 0 0 .293.707l3 3a1 1 0 0 0 1.414-1.414l-2.707-2.707v-4.586a1 1 0 0 0 -1-1z"></path></svg>',
        screenMax:
            '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="512" height="512"><path d="M19,24H17a1,1,0,0,1,0-2h2a3,3,0,0,0,3-3V17a1,1,0,0,1,2,0v2A5.006,5.006,0,0,1,19,24Z"></path><path d="M1,8A1,1,0,0,1,0,7V5A5.006,5.006,0,0,1,5,0H7A1,1,0,0,1,7,2H5A3,3,0,0,0,2,5V7A1,1,0,0,1,1,8Z"></path><path d="M7,24H5a5.006,5.006,0,0,1-5-5V17a1,1,0,0,1,2,0v2a3,3,0,0,0,3,3H7a1,1,0,0,1,0,2Z"></path><path d="M23,8a1,1,0,0,1-1-1V5a3,3,0,0,0-3-3H17a1,1,0,0,1,0-2h2a5.006,5.006,0,0,1,5,5V7A1,1,0,0,1,23,8Z"></path></svg>',
        screenMin:
            '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="512" height="512"><path d="M7,0A1,1,0,0,0,6,1V3A3,3,0,0,1,3,6H1A1,1,0,0,0,1,8H3A5.006,5.006,0,0,0,8,3V1A1,1,0,0,0,7,0Z"></path><path d="M23,16H21a5.006,5.006,0,0,0-5,5v2a1,1,0,0,0,2,0V21a3,3,0,0,1,3-3h2a1,1,0,0,0,0-2Z"></path><path d="M21,8h2a1,1,0,0,0,0-2H21a3,3,0,0,1-3-3V1a1,1,0,0,0-2,0V3A5.006,5.006,0,0,0,21,8Z"></path><path d="M3,16H1a1,1,0,0,0,0,2H3a3,3,0,0,1,3,3v2a1,1,0,0,0,2,0V21A5.006,5.006,0,0,0,3,16Z"></path></svg>',
        back: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="512" height="512"><path d="M10.6,12.71a1,1,0,0,1,0-1.42l4.59-4.58a1,1,0,0,0,0-1.42,1,1,0,0,0-1.41,0L9.19,9.88a3,3,0,0,0,0,4.24l4.59,4.59a1,1,0,0,0,.7.29,1,1,0,0,0,.71-.29,1,1,0,0,0,0-1.42Z"></path></svg>',
        warning:
            '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="512" height="512"><path d="M11,13V7c0-.55,.45-1,1-1s1,.45,1,1v6c0,.55-.45,1-1,1s-1-.45-1-1Zm1,2c-.83,0-1.5,.67-1.5,1.5s.67,1.5,1.5,1.5,1.5-.67,1.5-1.5-.67-1.5-1.5-1.5Zm11.58,4.88c-.7,1.35-2.17,2.12-4.01,2.12H4.44c-1.85,0-3.31-.77-4.01-2.12-.71-1.36-.51-3.1,.5-4.56L8.97,2.6c.71-1.02,1.83-1.6,3.03-1.6s2.32,.58,3,1.57l8.08,12.77c1.01,1.46,1.2,3.19,.49,4.54Zm-2.15-3.42s-.02-.02-.02-.04L13.34,3.67c-.29-.41-.79-.67-1.34-.67s-1.05,.26-1.36,.71L2.59,16.42c-.62,.88-.76,1.84-.4,2.53,.35,.68,1.15,1.05,2.24,1.05h15.12c1.09,0,1.89-.37,2.24-1.05,.36-.69,.22-1.65-.37-2.49Z"/></svg>',
    };

    const useThis = {
        mediaRecorder: null,
        recordedChunks: [],
        blobs: [],
        blob: null,
        timeout: {
            recording: null
        },
        interval: {
            recording: null
        },
        int: {
            intervalRecording: 0
        }
    }

    // const $element = document.querySelector('.div_Ur32DJUU6NXFiO3')
    //const video = document.getElementById('video_base')

    const $elements = Array.from(
        $element.querySelectorAll("[id]")
    ).reduce((prev, curr) => {
        prev[curr.getAttribute("id")] = curr;
        curr.removeAttribute("id");
        return prev;
    }, {});

    const canvas = $elements.canvas;
    const context = canvas.getContext("2d");

    const changeBlob = (blob) => {
        useThis.blob = blob
        $elements.btnDownload.style.opacity = blob == null ? .3 : 1
        $elements.btnDownload.style.pointerEvents = blob == null ? 'none' : 'initial'

        if (blob != null) {
            console.log('reproducir video');
            $elements.video.setAttribute('src', URL.createObjectURL(blob))
        }

    }

    const changeBlobs = (blobs) => {

        useThis.blobs = blobs
        $elements.blobs.innerHTML = blobs.map(() => `<span ></span>`).join('')
    }

    const draw = () => {
        if (!video.paused && !video.ended) {
            context.drawImage(video, 0, 0, canvas.width, canvas.height);
            requestAnimationFrame(draw); // Llamar a draw de nuevo en el siguiente cuadro de animaciÃ³n
        }
    };

    function convertSecondsToTime(seconds) {
        seconds = parseInt(seconds);

        return {
            hours: Math.floor(seconds / 3600),
            minutes: Math.floor((seconds % 3600) / 60),
            seconds: seconds % 60,
        };
    }

    function getPercentage(current, total) {
        return Math.floor((parseInt(current) / parseInt(total)) * 100);
    }

    function styleElement(element, styles) {
        Object.keys(styles ?? {}).forEach(
            (key) => (element.style[key] = styles[key])
        );
        return element;
    }

    $elements.btnRecord.addEventListener('click', () => {

        $elements.buttonRecordStop.innerHTML = $elements.btnStop.innerHTML

        $elements.btnRecord.style.display = 'none'
        $elements.btnStop.style.display = ''

        console.log('empezar a grabar');
        console.log('dar play al video');

        if (useThis.interval.recording != null) {
            clearInterval(useThis.interval.recording)
        }

        useThis.int.intervalRecording = 0

        const convert = convertSecondsToTime(useThis.int.intervalRecording)

        const cero = (num) => {
            return `0${num}`.slice(-2)
        }

        $elements.intervalrecording.textContent = [cero(convert.hours), cero(convert.minutes), cero(convert.seconds)].join(':')

        useThis.interval.recording = setInterval(() => {

            const convert = convertSecondsToTime(++useThis.int.intervalRecording)
            $elements.intervalrecording.textContent = [cero(convert.hours), cero(convert.minutes), cero(convert.seconds)].join(':')

        }, 1000)

        /* start */
        if (video.captureStream) {

            video.play()

            const stream = video.captureStream();
            const options = {
                mimeType: "video/webm; codecs=vp9",
                videoBitsPerSecond: 2500000,
            };

            useThis.mediaRecorder = new MediaRecorder(stream, options);

            useThis.mediaRecorder.ondataavailable = function (event) {
                if (event.data.size > 0) {
                    useThis.recordedChunks.push(event.data);
                }
            };

            useThis.mediaRecorder.onstop = function () {
                const blob = new Blob(useThis.recordedChunks, { type: "video/webm" });
                useThis.recordedChunks = [];

                changeBlobs([...useThis.blobs, blob])
                // useThis.blobs = [...useThis.blobs, blob]
                console.log(blob);
                console.log(useThis.blobs);

                // downloadFile(URL.createObjectURL(blob), 'prueba.webm')
                //     .revokeObjectURL(blob); 
            };

            useThis.mediaRecorder.start();
            //startBtn.disabled = true;
            //stopBtn.disabled = false;
        } else {
            console.error("La captura de stream no es soportada en este navegador.");
        }
        /* end */
    })

    $elements.btnStop.addEventListener('click', () => {

        if (useThis.interval.recording != null) clearInterval(useThis.interval.recording)

        $elements.buttonRecordStop.innerHTML = $elements.btnRecord.innerHTML

        $elements.btnRecord.style.display = ''
        $elements.btnStop.style.display = 'none'

        console.log('detener a grabar');
        console.log('pausar el video');

        if (useThis.mediaRecorder) {
            useThis.mediaRecorder.stop();
            video.pause();
            //startBtn.disabled = false;
            //stopBtn.disabled = true;
        }
    })

    $elements.btnOpen.addEventListener('click', () => {
        $elements.modalList.style.display = ''
    })

    $elements.btnScreen.addEventListener('click', () => {
        $elements.modalScreen.style.display = ''
    })

    $elements.closeModalList.addEventListener('click', () => {
        $elements.modalList.style.display = 'none'
    })

    $elements.closeModalList2.addEventListener('click', () => {
        $elements.modalList.style.display = 'none'
    })

    $elements.btnDownload.addEventListener('click', () => {
        const url = URL.createObjectURL(useThis.blob)
        const a = document.createElement("a");
        a.style.display = "none";
        a.href = url;
        a.download = name;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    })

    $elements.blobs.addEventListener('click', (e) => {
        const _span = e.target.closest('span')
        if (_span) {
            Array.from($elements.blobs.querySelectorAll('span')).forEach((span, index) => {

                if (span != _span) return span.classList.remove('focus')

                span.classList.add('focus')
                changeBlob(useThis.blobs[index])

            })
        }
    })

    video.addEventListener('ended', () => {
        console.log('video terminado');
        if ($elements.btnStop.style.display != 'none')
            $elements.btnStop.click()
    })



    video.addEventListener('play', () => {
        $elements.buttonPlay.innerHTML = icons.pause
        draw();
    })

    video.addEventListener('pause', () => {
        $elements.buttonPlay.innerHTML = icons.play
    })

    video.addEventListener('pause', () => {
        $elements.buttonPlay.innerHTML = icons.play
    })

    video.addEventListener("durationchange", () => {
        const convert = convertSecondsToTime(video.duration);
        $elements.durationText.textContent = [
            convert.hours || "-",
            convert.minutes,
            convert.seconds,
        ].join(":");
        $elements.durationInput.max = parseInt(video.duration);
    });

    video.addEventListener("loadedmetadata", e => {
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
    })

    if (video.readyState >= 1) {
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;

        if (!video.paused) draw()
    }

    video.addEventListener("timeupdate", () => {
        if ($elements.durationInput.getAttribute("data-status") == "true") return;

        const convert = convertSecondsToTime(video.duration - video.currentTime);
        $elements.durationText.textContent = [
            convert.hours || "-",
            `0${convert.minutes}`.slice(-2),
            `0${convert.seconds}`.slice(-2),
        ].join(":");

        styleElement($elements.durationBar, {
            width: getPercentage(video.currentTime, video.duration) + "%",
        });

        $elements.durationInput.value = parseInt(video.currentTime);
    })

    $elements.durationInput.addEventListener("input", () => {
        $elements.durationInput.setAttribute("data-status", true);

        const convert = convertSecondsToTime(
            video.duration - $elements.durationInput.value
        );
        $elements.durationText.textContent = [
            convert.hours || "-",
            `0${convert.minutes}`.slice(-2),
            `0${convert.seconds}`.slice(-2),
        ].join(":");

        styleElement($elements.durationBar, {
            width:
                getPercentage($elements.durationInput.value, video.duration) + "%",
        });

    });

    $elements.durationInput.addEventListener("change", () => {
        $elements.durationInput.setAttribute("data-status", false);
        video.currentTime = parseInt($elements.durationInput.value);
    });

    $elements.toggleControls.addEventListener('click', () => {

        $elements.toggleControls.setAttribute('data-toggle', $elements.toggleControls.getAttribute('data-toggle') != 'on' ? 'on' : 'off')
        Array.from($elements.controls.querySelectorAll('[data-control]')).forEach(element => {

            if ($elements.toggleControls.getAttribute('data-toggle') == 'on') {
                element.style.display = ''
            } else {
                element.style.display = 'none'
            }

        })

    })

    $elements.closeModalScreen.addEventListener('click', () => {
        $elements.modalScreen.style.display = 'none'
    })

    $elements.closeModalScreen2.addEventListener('click', () => {
        $elements.modalScreen.style.display = 'none'
    })

    $elements.buttonPlay.addEventListener('click', () => {
        if (video.paused) video.play()
        else video.pause()
    })

    $elements.buttonRecordStop.addEventListener('click', () => {
        if ($elements.btnRecord.style.display == '') {
            $elements.btnRecord.click()
        } else {
            $elements.btnStop.click()
        }
    })

    $elements.buttonFullscreen.addEventListener("click", () => {
        if (document.fullscreenElement) document.exitFullscreen();
        else $elements.elementFullscreen.requestFullscreen();
    });

    document.addEventListener("fullscreenchange", () => {
        if (document.contains($elements.elementFullscreen)) {
            $elements.buttonFullscreen.innerHTML = document.fullscreenElement
                ? icons.screenMin
                : icons.screenMax;
            if (document.fullscreenElement) {
                if (window.screen.orientation && window.screen.orientation.lock) {
                    window.screen.orientation.lock("landscape");
                }
            } else {
                if (window.screen.orientation && window.screen.orientation.unlock) {
                    window.screen.orientation.unlock();
                }
            }
        }
    });

    Array.from([$elements.btnStop]).forEach(btn => btn.style.display = 'none')

    Array.from($element.querySelectorAll('[data-assign-icon]')).forEach(element => element.innerHTML = icons[element.getAttribute('data-assign-icon')])

    changeBlob(null)



</script>

<body>
    <template>
        <div class="div_Ur32DJUU6NXFiO3">

            <div class="div_vOjQgb9XSrcW3">
                <button>
                    <svg xmlns="http://www.w3.org/2000/svg" id="arrow-circle-down" viewBox="0 0 24 24" width="512"
                        height="512">
                        <path
                            d="M23.351,10.253c-.233-.263-.462-.513-.619-.67L20.487,7.3a1,1,0,0,0-1.426,1.4l2.251,2.29L21.32,11H13V2.745l2.233,2.194a1,1,0,0,0,1.4-1.426l-2.279-2.24c-.163-.163-.413-.391-.674-.623A2.575,2.575,0,0,0,12.028.006.28.28,0,0,0,12,0l-.011,0a2.584,2.584,0,0,0-1.736.647c-.263.233-.513.462-.67.619L7.3,3.513A1,1,0,1,0,8.7,4.939l2.29-2.251L11,2.68V11H2.68l.015-.015L4.939,8.7A1,1,0,1,0,3.513,7.3L1.274,9.577c-.163.163-.392.413-.624.675A2.581,2.581,0,0,0,0,11.989L0,12c0,.01.005.019.006.029A2.573,2.573,0,0,0,.65,13.682c.233.262.461.512.618.67l2.245,2.284a1,1,0,0,0,1.426-1.4L2.744,13H11v8.32l-.015-.014L8.7,19.062a1,1,0,1,0-1.4,1.425l2.278,2.239c.163.163.413.391.675.624a2.587,2.587,0,0,0,3.43,0c.262-.233.511-.46.669-.619l2.284-2.244a1,1,0,1,0-1.4-1.425L13,21.256V13h8.256l-2.2,2.233a1,1,0,1,0,1.426,1.4l2.239-2.279c.163-.163.391-.413.624-.675A2.589,2.589,0,0,0,23.351,10.253Z" />
                    </svg>
                </button>
                <div class="div_lZkA8fmCq8F5KZZ">
                    <button id="btnOpen">
                        <svg xmlns="http://www.w3.org/2000/svg" id="Outline" viewBox="0 0 24 24" width="512"
                            height="512">
                            <path d="M7,6H23a1,1,0,0,0,0-2H7A1,1,0,0,0,7,6Z" />
                            <path d="M23,11H7a1,1,0,0,0,0,2H23a1,1,0,0,0,0-2Z" />
                            <path d="M23,18H7a1,1,0,0,0,0,2H23a1,1,0,0,0,0-2Z" />
                            <circle cx="2" cy="5" r="2" />
                            <circle cx="2" cy="12" r="2" />
                            <circle cx="2" cy="19" r="2" />
                        </svg>
                    </button>
                    <button id="btnScreen">
                        <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24">
                            <path
                                d="m14.503,10.087l-.314,3.659c-.031.44-.337.779-.706.779-.244,0-.471-.151-.601-.4l-.831-1.6-.831,1.6c-.129.249-.356.4-.601.4-.368,0-.675-.339-.706-.779l-.314-3.659c-.026-.302.212-.562.515-.562.27,0,.494.208.516.477l.212,2.681.75-1.443c.193-.372.725-.372.918,0l.75,1.443.21-2.681c.021-.269.246-.477.516-.477h.002c.303,0,.541.26.515.562Zm5.433-.562h-.002c-.27,0-.495.208-.516.477l-.21,2.681-.75-1.443c-.193-.372-.725-.372-.918,0l-.75,1.443-.212-2.681c-.021-.269-.246-.477-.516-.477-.303,0-.541.26-.515.562l.314,3.659c.031.44.337.779.706.779.244,0,.471-.151.601-.4l.831-1.6.831,1.6c.129.249.356.4.601.4.368,0,.675-.339.706-.779l.314-3.659c.026-.302-.212-.562-.515-.562Zm-12,0h-.002c-.27,0-.495.208-.516.477l-.21,2.681-.75-1.443c-.193-.372-.725-.372-.918,0l-.75,1.443-.212-2.681c-.021-.269-.246-.477-.516-.477-.303,0-.541.26-.515.562l.314,3.659c.031.44.337.779.706.779.244,0,.471-.151.601-.4l.831-1.6.831,1.6c.129.249.356.4.601.4.368,0,.675-.339.706-.779l.314-3.659c.026-.302-.212-.562-.515-.562Zm4.065,14.474h-.003c-6.617,0-11.999-5.384-11.999-12S5.375.008,11.986,0c.004,0,.008,0,.012,0h.002c6.617,0,12,5.383,12,12s-5.382,11.999-11.999,12Zm2.693-6h-5.389c.932,1.603,2.015,2.867,2.695,3.588.68-.721,1.763-1.985,2.695-3.588Zm6.469-2c.537-1.226.836-2.578.836-4s-.299-2.774-.836-4h-4.807c-.006,0-.013,0-.019,0-.005,0-.009,0-.014,0H7.676s-.009,0-.014,0c-.006,0-.013,0-.019,0H2.836c-.537,1.226-.836,2.578-.836,4s.299,2.774.836,4h4.792c.023,0,.047,0,.07,0h8.605c.023,0,.047,0,.07,0h4.792ZM9.305,6h5.389c-.932-1.603-2.015-2.867-2.695-3.588-.68.721-1.763,1.985-2.695,3.588Zm5.289-3.658c.771.957,1.646,2.203,2.373,3.658h3.027c-1.324-1.76-3.216-3.07-5.4-3.658Zm-10.59,3.658h3.027c.727-1.455,1.602-2.701,2.373-3.658-2.184.587-4.076,1.898-5.4,3.658Zm5.4,15.658c-.771-.957-1.646-2.203-2.373-3.658h-3.027c1.324,1.76,3.216,3.07,5.4,3.658Zm10.59-3.658h-3.027c-.727,1.455-1.602,2.701-2.373,3.658,2.184-.587,4.076-1.898,5.4-3.658Z" />
                        </svg>
                    </button>
                    <button id="btnStop">
                        <svg xmlns="http://www.w3.org/2000/svg" id="Outline" viewBox="0 0 24 24" width="512"
                            height="512">
                            <path
                                d="M19,0H5A5.006,5.006,0,0,0,0,5V19a5.006,5.006,0,0,0,5,5H19a5.006,5.006,0,0,0,5-5V5A5.006,5.006,0,0,0,19,0Zm3,19a3,3,0,0,1-3,3H5a3,3,0,0,1-3-3V5A3,3,0,0,1,5,2H19a3,3,0,0,1,3,3Z" />
                        </svg>
                    </button>
                    <button id="btnRecord">
                        <svg xmlns="http://www.w3.org/2000/svg" id="Outline" viewBox="0 0 24 24" width="512"
                            height="512">
                            <path
                                d="M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm0,22A10,10,0,1,1,22,12,10.011,10.011,0,0,1,12,22Z" />
                        </svg>
                    </button>
                </div>
            </div>

            <div id="modalList" class="div_7mihnzNaZnFC5HG" style="display: none;">
                <div id="closeModalList" style="position: inherit; inset: inherit;"></div>
                <div class="div_1sRBPp9RSs22UhT">
                    <div class="div_sqeCyW5YlYsoB">
                        <button id="closeModalList2"><svg xmlns="http://www.w3.org/2000/svg" id="Outline"
                                viewBox="0 0 24 24" width="512" height="512">
                                <path
                                    d="M10.6,12.71a1,1,0,0,1,0-1.42l4.59-4.58a1,1,0,0,0,0-1.42,1,1,0,0,0-1.41,0L9.19,9.88a3,3,0,0,0,0,4.24l4.59,4.59a1,1,0,0,0,.7.29,1,1,0,0,0,.71-.29,1,1,0,0,0,0-1.42Z" />
                            </svg>
                        </button>

                        <div class="div_03MynLZC8kztGGq">
                            <div id="blobs" class="div_GhMIbLOSkhxFYKR"></div>
                        </div>

                        <button id="btnDownload">
                            <svg xmlns="http://www.w3.org/2000/svg" id="Outline" viewBox="0 0 24 24" width="512"
                                height="512">
                                <path
                                    d="M9.878,18.122a3,3,0,0,0,4.244,0l3.211-3.211A1,1,0,0,0,15.919,13.5l-2.926,2.927L13,1a1,1,0,0,0-1-1h0a1,1,0,0,0-1,1l-.009,15.408L8.081,13.5a1,1,0,0,0-1.414,1.415Z" />
                                <path
                                    d="M23,16h0a1,1,0,0,0-1,1v4a1,1,0,0,1-1,1H3a1,1,0,0,1-1-1V17a1,1,0,0,0-1-1H1a1,1,0,0,0-1,1v4a3,3,0,0,0,3,3H21a3,3,0,0,0,3-3V17A1,1,0,0,0,23,16Z" />
                            </svg>
                        </button>
                    </div>
                    <div class="div_Q7Fo8NXg3F1Q2K">
                        <video id="video" src="" controls></video>
                    </div>
                </div>
            </div>

            <div id="modalScreen" class="div_7mihnzNaZnFC5HG" style="display: none;">
                <div id="closeModalScreen" style="position: inherit; inset: inherit;"></div>
                <div class="div_1sRBPp9RSs22UhT" style="display: flex;">
                    <div id="elementFullscreen" class="div_Q7Fo8NXg3F1Q2K">
                        <canvas id="canvas"></canvas>
                        <div id="controls" class="div_LAppN2JUWu0jkdj">
                            <div id="toggleControls" style="position: inherit; inset: inherit;" data-toggle="on"></div>
                            <div class="div_FjdPGlm8AY56dul" data-control="">
                                <button id="closeModalScreen2" class="button_wBp8eB3YdFZoLqE"><svg
                                        xmlns="http://www.w3.org/2000/svg" id="Outline" viewBox="0 0 24 24" width="512"
                                        height="512">
                                        <path
                                            d="M10.6,12.71a1,1,0,0,1,0-1.42l4.59-4.58a1,1,0,0,0,0-1.42,1,1,0,0,0-1.41,0L9.19,9.88a3,3,0,0,0,0,4.24l4.59,4.59a1,1,0,0,0,.7.29,1,1,0,0,0,.71-.29,1,1,0,0,0,0-1.42Z" />
                                    </svg></button>
                                <div class="div_RyRmgPCbEnfoDT">
                                    <span id="intervalrecording" data-time="0">--:--:--</span>
                                    <button id="buttonRecordStop" class="button_wBp8eB3YdFZoLqE"><svg
                                            xmlns="http://www.w3.org/2000/svg" id="Outline" viewBox="0 0 24 24"
                                            width="512" height="512">
                                            <path
                                                d="M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm0,22A10,10,0,1,1,22,12,10.011,10.011,0,0,1,12,22Z" />
                                        </svg></button>

                                </div>

                            </div>
                            <div class="div_30iEfg1Tp8Z9Sfe" data-control="">
                                <button id="buttonPlay" class="button_wBp8eB3YdFZoLqE" data-assign-icon="play"></button>
                                <div id="duration" class="div_quGYBx1MHxIWCd6">
                                    <span id="durationText">99:99</span>
                                    <div class="div_iVl4urAy8xQ7zk6">
                                        <hr id="durationBar">
                                        <input id="durationInput" type="range" data-status="false" min="0" value="0"
                                            max="0">
                                    </div>
                                </div>
                                <button id="buttonFullscreen" class="button_wBp8eB3YdFZoLqE"
                                    data-assign-icon="screenMax"></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </template>
</body>
